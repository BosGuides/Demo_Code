<!-- 当前文档为获取模型外轮廓示例代码 -->

<!DOCTYPE html> 
 <html> 
     <head> 
         <title>Outer</title> 
         <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
         <link rel="stylesheet" href="http://www.boswinner.com.cn/vizbim/BIMWINNER.viewer.min.css" /> 
     </head> 
     <body> 
         <div id="viewport" style="width: 800px; height: 600px;"></div> 

         <script type="text/javascript" src="http://www.boswinner.com.cn/vizbim/jquery.min.js"></script> 
         <script type="text/javascript" src="http://www.boswinner.com.cn/vizbim/bootstrap-treeview.min.js"></script> 
         <script type="text/javascript" src="http://www.boswinner.com.cn/vizbim/spectrum.js"></script> 
         <script type="text/javascript" src="http://www.boswinner.com.cn/vizbim/jquery-ui.js"></script> 
         <script type="text/javascript" src="http://www.boswinner.com.cn/vizbim/three.min.js"></script> 
         <script type="text/javascript" src="http://www.boswinner.com.cn/vizbim/jszip.min.js"></script> 
         <script type="text/javascript" src="http://www.boswinner.com.cn/vizbim/BIMWINNER.viewer.min.js"></script> 

         <script type="text/javascript"> 
             //配置文件KEY 
             //获取文件KEY请前往“我的模型/个人中心-->我的模型”，http://www.boswinner.com.cn/mymodel 
             var filekey = "demo_apartment"; 
             var op = { 
                 viewport:"viewport", //画布容器 
                 //配置开发密钥 
                 //获取开发密钥请前往“个人中心-->个人资料”，http://www.boswinner.com.cn/userpersonal 
                 devcode:"e10e59bf0ee97213ca7104977877bd1a", 
             }; 
             //1.创建三维浏览器对象 
             var vizbim = new BIMWINNER.Viewer(op); 
             //2.添加工具条 
             var tool = new BIMWINNER.Tool(vizbim); 
             tool.createTool(); 
             //3.加载模型 
             vizbim.showModelByDocumentId(filekey,function(){ 
                //pre_step: 若当前模型尚未提取过外轮廓，需先提取外轮廓,即执行pre_step
                //          将模型id传入提取模型外轮廓接口中，发送请求计算外轮廓
                //GET:
                //models/{fileKey}/outlines/!parse?devcode="UserDevcode";

                //var url_calculateouter = "http://api.boswinner.com.cn/models/demo_apartment/outlines/%21parse?devcode=e10e59bf0ee97213ca7104977877bd1a";
                //$.ajax({
                //    type: 'GET',
                //    url: url_calculateouter
                //    });
                //不断调用提取外轮廓接口，
                //直至返回信息为“外轮廓已提取完成”
                //才可以执行step1

                //step1: 将模型id传入获取模型外轮廓接口中
                //       返回值为所选模型的外轮廓构件集
                //GET: 
                //models/{fileKey}/outlines?devcode="UserDevcode";
                var url_outer = "http://api.boswinner.com.cn/models/demo_apartment/outlines?devcode=e10e59bf0ee97213ca7104977877bd1a";
                $.ajax({
                    type: 'GET',
                    url: url_outer
                    })
                .done(function(returnData){
                    //返回的构件列表将在console里显示出来
                    console.log(returnData["data"]);
                    //为方便展示，调用隔离接口，将外轮廓展示在三维中
                    vizbim.isolationObjs(returnData["data"]);
                    });
                }); 
             //4.设置全屏显示 
             vizbim.autoResize=true; 
             vizbim.resize(); 
         </script> 
     </body> 
     

 </html>
